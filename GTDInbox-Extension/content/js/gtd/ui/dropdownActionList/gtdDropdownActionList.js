var gtdDropdownActionList=giDropdown.extend({elPinCollection:null,_thread:null,id:null,_serverActionType:null,connect:function(main){giLogger.log("st","gtdDropdownActionList.connect",main.pageId);this.base(main)},disconnect:function(){this._main.labelsData.removeEventListener(gtdLabelsData.LABEL_CHANGED,this._labelChanged,this);this._main.gmail.actions.removeEventListener(glActionManager.THREAD_CHANGED,this._threadChanged,this);if(this.elPinCollection&&this.elPinCollection.parentNode)this.elPinCollection.parentNode.removeChild(this.elPinCollection);
this.elPinCollection=null;this.base()},init:function(elButton,elButtonTitle,elContent,useMouseover,id,usePin){giLogger.log("st","gtdDropdownActionList.init",this._main?this._main.pageId:giLogger.UNKNOWN_PAGE_ID);this.base(elButton,elButtonTitle,elContent,useMouseover);this.id=id;this._usePin=usePin;var doc=this._main.gmail.canvasDocument;this.elPinCollection=doc.createElement("DIV");giUIObject.addClassName(this.elPinCollection,"gtdi-dropdown-actionlist-pincollection");giUIObject.addClassName(this.elButton,
"gtdi-dropdown-actionlist");this._main.labelsData.addEventListener(gtdLabelsData.LABEL_CHANGED,this._labelChanged,this);this._main.gmail.actions.addEventListener(glActionManager.THREAD_CHANGED,this._threadChanged,this);this._eventsContainer.observe(this.elContent,"click",this._clickContentOrPinCollection,false);this._eventsContainer.observe(this.elPinCollection,"click",this._clickContentOrPinCollection,false);this._reloadContent();this._reloadPinCollection()},setThread:function(thread){if(this._thread){this._thread.removeEventListener(glThread.THREAD_LOADED,
this._threadLoaded,this);this._thread=null}if(thread){this._thread=thread;this._thread.addEventListener(glThread.THREAD_LOADED,this._threadLoaded,this);this._threadLoaded()}},setServerActionType:function(serverActionType){this._serverActionType=serverActionType},_threadLoaded:function(evt){},_threadChanged:function(evt){},_labelChanged:function(evt){this._reloadContent();this._reloadPinCollection()},_reloadContent:function(){},_reloadPinCollection:function(){},_createRow:function(elRowItem){var elRow=
this._main.gmail.canvasDocument.createElement("DIV");elRow.className="gtdi-dropdown-actionlist-row";giUIObject.addClassName(elRowItem,"gtdi-dropdown-actionlist-row-item");elRow.appendChild(elRowItem);return elRow},_applyToContentRows:function(f){var result=this._main.gmail.canvasDocument.evaluate(".//*[@gtdi-item]",this.elContent,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var i=0;i<result.snapshotLength;i++)f(result.snapshotItem(i),result.snapshotItem(i).getAttribute("gtdi-item"))},_applyToPinCollectionRows:function(f){var result=
this._main.gmail.canvasDocument.evaluate(".//*[@gtdi-item]",this.elPinCollection,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(var i=0;i<result.snapshotLength;i++)f(result.snapshotItem(i),result.snapshotItem(i).getAttribute("gtdi-item"))},_clickContentOrPinCollection:function(event){try{var el=event.target;var i=6;while(el.parentNode&&--i>=0){if(giUIObject.hasClassName(el,"gtdi-dropdown")&&this.elContent.style.display=="none"){this._showDropdown();return}if(giUIObject.hasClassName(el,"gtdi-dropdown-content"))return;
el=el.parentNode}}catch(e){giLogger.warn(e,"gtdDropdownActionList._click",null,this._main?this._main.pageId:giLogger.UNKNOWN_PAGE_ID)}}},{});

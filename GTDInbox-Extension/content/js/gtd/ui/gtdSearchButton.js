var gtdSearchButton=giUIObject.extend({el:null,_eventsContainer:null,connect:function(main){giLogger.log("st","gtdSearchButton.connect",main?main.pageId:giLogger.UNKNOWN_PAGE_ID);this.base(main);this._eventsContainer=new giEventsContainer(this);var searchBox=main.gmail.getUIObject("searchBox");this.el=giUIObject.createGmailButton("gmail-header-button",giI18N.getString("Search.Button"),null,this._main.gmail);this._eventsContainer.observe(this.el,"click",this._click,false);this._eventsContainer.observe(this.el,
"keydown",this._key,false);searchBox.searchMailButton.parentNode.insertBefore(this.el,searchBox.searchMailButton.nextSibling)},_key:function(event){if(event.keyCode==13||event.keyCode==32)this._click(event)},_click:function(event){try{var searchBox=this._main.gmail.getUIObject("searchBox");var popup=this._main.getUIObject("browserPopup");popup.load(gtdBrowser.createBrowser(this._main,searchBox.searchBox.value))}catch(e){giLogger.warn(e,"gtdSearchButton._click",null,this._main?this._main.pageId:giLogger.UNKNOWN_PAGE_ID)}},
disconnect:function(){if(this.el&&this.el.parentNode)this.el.parentNode.removeChild(this.el);this.el=null;this._eventsContainer.reset();this.base()},isCacheable:function(){return true}});

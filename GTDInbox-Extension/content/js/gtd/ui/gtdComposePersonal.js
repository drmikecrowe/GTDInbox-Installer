var gtdComposePersonal=giUIObject.extend({_eventsContainer:null,el:null,connect:function(main){giLogger.log("st","gtdComposePersonal.connect",main?main.pageId:giLogger.UNKNOWN_PAGE_ID);this.base(main);this._eventsContainer=new giEventsContainer(this);var doc=main.gmail.canvasDocument;var navBar=main.gmail.getUIObject("navBar");this.el=navBar.composeLink.cloneNode(true);this.el.innerHTML=giI18N.getString("Compose.Personal");navBar.composeLink.parentNode.appendChild(doc.createElement("BR"));navBar.composeLink.parentNode.appendChild(this.el);
this._eventsContainer.observe(navBar.composeLink,"click",this._clickMail,false);this._eventsContainer.observe(this.el,"click",this._click,false)},_clickMail:function(event){},_click:function(event){try{var navBar=this._main.gmail.getUIObject("navBar");giUIObject.simulateMouseEvent(navBar.composeLink,"click");var f=giUtil.bind(this,function(){if(this._main.gmail.page.getActiveViewType()=="co")this._main.getCurrentViewObject().composeTabs.select("compose-tab-personal");else setTimeout(giUtil.bind(this,
function(){if(this._main.gmail.page.getActiveViewType()=="co")this._main.getCurrentViewObject().composeTabs.select("compose-tab-personal")}),2E3)});setTimeout(f,500)}catch(e){giLogger.warn(e,"gtdComposePersonal._click",null,this._main?this._main.pageId:giLogger.UNKNOWN_PAGE_ID)}},disconnect:function(){this._eventsContainer.reset();if(this.el&&this.el.parentNode)this.el.parentNode.removeChild(this.el);this.el=null;this.base()},isCacheable:function(){return true}});

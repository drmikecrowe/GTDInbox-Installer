var gtdMigrator=giPluginMigrator.extend({migrate:function(pluginPrefs,previousVersion){switch(previousVersion){case "1.0a11":pluginPrefs.setPref("components.navigation.gmail_labels_box.enabled",true);pluginPrefs.setPref("components.navigation.gmail_labels_box.recent_hidden",true);case "1.0a12":pluginPrefs.setPref("labels.types.statuses.core.next_action",null);case "1.0a15":var types=pluginPrefs.getPref("labels.types");if(types&&types.statuses&&types.statuses.core){var newCore={};for(c in types.statuses.core)if(typeof types.statuses.core[c]==
"string"){var name=types.statuses.core[c];newCore[c]={name:name}}else newCore[c]=types.statuses.core[c];types.statuses.core=newCore;if(types.statuses.core["today"]){types.statuses.core["today"].excludeFromOptions=true;types.statuses.core["today"].notExclusive=true}if(types.statuses.core["action"])types.statuses.core["action"].excludeFromOptions=true;if(types.statuses.core["some_day"])types.statuses.core["some_day"].autoInstall=true;if(types.statuses.core["waiting_on"])types.statuses.core["waiting_on"].autoInstall=
true;types.statuses.core["next_action"]={name:"Next",autoInstall:true}}if(types.projects)types.projects.isPrimary=true;if(types.contexts)types.contexts.isPrimary=true;pluginPrefs.setPref("labels.types",types);pluginPrefs.setPref("allow_multiple_statuses",null);pluginPrefs.setPref("do_not_remove_statuses_on_finish",null);case "1.0a27":var core=pluginPrefs.getPref("labels.types.statuses.core");if(core){var nc={};var d=["today","next_action","action","waiting_on","some_day","finished"];for(var i=0;i<
d.length;i++)if(core[d])nc[d]=core[d];pluginPrefs.setPref("labels.types.statuses.core",nc)}case "1.0a27a":var types=pluginPrefs.getPref("labels.types");if(!types.statuses.core["today"])types.statuses.core["today"]={name:"Today",excludeFromOptions:true,notExclusive:true};if(!types.statuses.core["action"])types.statuses.core["action"]={name:"Action"};types.statuses.core["action"].excludeFromOptions=false;pluginPrefs.setPref("labels.types",types);pluginPrefs.setPref("allow_multiple_statuses",false);
case "3.0.1":pluginPrefs.setPref("components.conversation.reply_to_self.enabled",true);pluginPrefs.setPref("components.conversation.send_and.enabled",true);pluginPrefs.setPref("components.compose.send_and.enabled",true);case "3.0.1.1":pluginPrefs.setPref("components.compose.compose_personal.filter_name","self");pluginPrefs.setPref("components.conversation.reply_to_self.filter_name","self");case "3.0.2":if(!types)types=pluginPrefs.getPref("labels.types");if(!types.statuses.core["next_action"])types.statuses.core["next_action"]=
{name:"Next",autoInstall:"true"};case "3.0.4":if(!types)types=pluginPrefs.getPref("labels.types");if(!types.statuses.core["waiting_on"])types.statuses.core["waiting_on"]={name:"Waiting On",autoInstall:"true"};if(!types.statuses.core["some_day"])types.statuses.core["some_day"]={name:"Some Day",autoInstall:"true"};case "3.0.5":if(!types)types=pluginPrefs.getPref("labels.types");if(!types.statuses.core["finished"])types.statuses.core["finished"]={name:"Finished",autoInstall:"true"};case "3.0.6":if(!types)types=
pluginPrefs.getPref("labels.types");if(!types.deadlines)types.deadlines={prefix:"D/",isHidden:true};case "3.0.7":if(!types)types=pluginPrefs.getPref("labels.types");delete types.statuses.core.today;pluginPrefs.setPref("labels.types",types)}}});

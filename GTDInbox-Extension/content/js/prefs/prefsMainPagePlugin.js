var prefMainPagePlugin=giMainPageUIPlugin.extend({_eventsContainer:null,constructor:function(){},load:function(accountData,pageBase,classPrefix,serverAccount,pageId){giLogger.log("st","prefMainPagePlugin.load",pageId);this.base(accountData,pageBase,"prefs",serverAccount,pageId);this._eventsContainer=new giEventsContainer(this);this.gmail.page.addEventListener(glPageWrapper.UI_READY,this._baseUIReady,this)},unload:function(){this._eventsContainer.reset();this._eventsContainer=null;this.base()},_baseUIReady:function(evt){try{giLogger.log("st",
"prefMainPagePlugin._baseUIReady",this.pageId);this.gmail.page.addCSS(giUrl.getURL("skin/prefs/c/main.css"));var box=giPluginManager.getPluginInstance(boxMain,this.gmail);var aboutBox=box.getUIObject("about");var elRow=this.gmail.doc.createElement("DIV");elRow.id="gtdi-link-preferences";elRow.innerHTML="<a href='#' onclick='return false;'>"+giI18N.getString("Prefs.boxlink")+"</a>";aboutBox._addRow("prefslink",elRow);this._eventsContainer.observe(elRow,"click",this._click,false)}catch(e){giLogger.warn(e,
"prefMainPagePlugin._baseUIReady",null,this.pageId)}},_click:function(evt){var el=evt.target;if(el.parentNode.id=="gtdi-link-preferences")this.getUIObject("base")}});giPluginManager.registerPlugin({id:"prefs",version:"1.0",main:"prefMainPagePlugin"});

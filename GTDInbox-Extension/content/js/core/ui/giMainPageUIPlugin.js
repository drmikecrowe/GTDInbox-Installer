var giMainPageUIPlugin=giPlugin.extend({gmail:null,prefs:null,_classPrefix:null,serverAccount:null,pageId:null,_ui:null,load:function(accountData,pageBase,classPrefix,serverAccount,pageId){this.prefs=accountData;this.gmail=pageBase;this._ui={};this._classPrefix=classPrefix;this.serverAccount=serverAccount;this.pageId=pageId},unload:function(){if(this._unloaded)giLogger.error(this._classPrefix+" already unloaded","giMainPageUIPlugin.unload",this.pageId);this._unloaded=true;for(var element in this._ui)try{if(this._ui[element])this._ui[element].disconnect();
this._ui[element]=null}catch(e){var f=this._ui[element]&&this._ui[element].disconnect?this._ui[element].disconnect.toString():"not-defined";giLogger.warn(e,"giMainPageUIPlugin.unload","Class prefix: "+this._classPrefix+"\nUI item ('element'): "+element+"\nDisconnect function:\n"+f,this.pageId)}this._ui=null;this.gmail=null;this.prefs=null;this.serverAccount=null},getUIObject:function(type){var object=null;if(!this._ui[type]){theClass=this._classPrefix+type.substr(0,1).toUpperCase()+type.substr(1);
giLogger.log('Creating object: "'+theClass+'"',"giUIPlugin.getUIObject",this.pageId);try{object=new window[theClass]}catch(e){giLogger.error("Failure instantiating "+theClass+" UI object. Original error: "+e.message,"giUIPlugin.getUIObject",this.pageId)}object.connect(this);if(object.isCacheable())this._ui[type]=object}else object=this._ui[type];return object},_viewChanged:function(evt){if(typeof this._ui["_currentViewObject"]!="undefined"){this._ui["_currentViewObject"].object.disconnect();delete this._ui["_currentViewObject"]}this.getCurrentViewObject()},
getCurrentViewObject:function(){if(!this.gmail.page.isUIReady())return null;if(typeof this._ui["_currentViewObject"]!="undefined")return this._ui["_currentViewObject"].object;var uiObject="";var viewType=this.gmail.page.getActiveViewType();switch(viewType){case "tl":uiObject="threadListView";break;case "cv":uiObject="conversationView";break;case "co":uiObject="composeView";break;case "ct":uiObject="contactsView";break;case "s":uiObject="settingsView";break}if(uiObject=="")return null;else try{this._ui["_currentViewObject"]=
{object:this.getUIObject(uiObject),type:viewType}}catch(e){giLogger.warn(e,"giMainPageUIPlugin.getCurrentViewObject",null,this.pageId)}return this._ui["_currentViewObject"].object}});

var glSearchBox=glUIWidget.extend({searchBox:null,searchMailButton:null,containerRow:null,connect:function(gmail){giLogger.log("st","glSearchBox.connect",gmail.pageId);this.base(gmail);var doc=gmail.canvasDocument;this.searchBox=doc.evaluate(".//td[@class='bN']/input[@type='text']",doc.body,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!this.searchBox)giLogger.error("Could not find searchBox node","glSearchBox.connect",this._gmail?this._gmail.pageId:giLogger.UNKNOWN_PAGE_ID);var elButton=
doc.evaluate(".//td[@class='bN bM']/div",doc.body,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!elButton)giLogger.error("Could not find any searchMailButton node","glSearchBox.connect",this._gmail?this._gmail.pageId:giLogger.UNKNOWN_PAGE_ID);this.searchMailButton=elButton.parentNode.childNodes[elButton.parentNode.childNodes.length-2];if(!this.searchMailButton)giLogger.error("Could not find searchMailButton node","glSearchBox.connect",this._gmail?this._gmail.pageId:giLogger.UNKNOWN_PAGE_ID);
this.containerRow=this.searchBox.parentNode.parentNode;if(!this.containerRow)giLogger.error("Could not find containerRow node","glSearchBox.connect",this._gmail?this._gmail.pageId:giLogger.UNKNOWN_PAGE_ID)},disconnect:function(){this.searchBox=null;this.searchMailButton=null;this.containerRow=null;this.base()},getSearch:function(){return this.searchBox.value},setSearch:function(value){this.searchBox.value=value},submit:function(){this._gmail.page.simulateMouseEvent(this.searchMailButton,["mousedown",
"mouseup"],null,null,true)}});
